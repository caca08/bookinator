<!DOCTYPE html>
<html>
	<head>
		<title>Bookinator.</title>
		<link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
		<link href="./index.css" rel="stylesheet" media="screen">
		<script src="./jquery-1.7.2.js"></script>
		<script src="./bootstrap/js/bootstrap.min.js"></script>
		<script src="./turn.js/turn.js"></script>
	</head>
	<body>
		<div class="container">
			<h1>Bookinator.</h1>
			<textarea class="input-xxlarge" rows="20"></textarea><br />
			<button class="btn btn-large btn-primary" type="button">Bookinate.</button><br />
		</div>

		<div id="bookcontainer">
		</div>

		<div id="pagesource">
		</div>

		<script>
			$(document).ready(function() {
				$('button.btn.btn-large.btn-primary').click(function() {
					$('#book').unbind();
					$('#book').remove();
					$('#bookcontainer div').empty();
					var text = $('textarea.input-xxlarge').val();
					var pageContents = text.split("----");
					$('.container').remove();
					var noOfPages = pageContents.length;
					for (var eachPage = 0; eachPage < noOfPages; eachPage++) {
						if ((eachPage == 0 || eachPage == noOfPages - 1) && pageContents[eachPage] != '') {
							if (eachPage == 0) {
								$('#bookcontainer').html('<div id="book">');
								$('#book').html('<div class="hard content">' + pageContents[eachPage] + '</div>');
							} else if(eachPage == noOfPages - 1) {
								$('#book').append('<div class="hard content">' + pageContents[eachPage] + '</div>');
								$('#bookcontainer').append('</div>');
							}
							continue;
						}

						$('#book').append('<div class="content">' + pageContents[eachPage] + '</div>');
					}

					$('#pagesource').text('<!DOCTYPE html><html>' + document.getElementsByTagName('html')[0].innerHTML + '</html>');

					$('#book').turn({
						autoCenter: true
					});
				});
			});
		</script>
	</body>
</html>
